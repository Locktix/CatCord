{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alanp\\\\Documents\\\\GitHub\\\\Catcord\\\\catcord-frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { auth } from './firebase';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport AuthForm from './components/AuthForm';\nimport ServerSidebar from './components/ServerSidebar';\nimport ChannelPanel from './components/ChannelPanel';\nimport MessagePanel from './components/MessagePanel';\nimport MemberPanel from './components/MemberPanel';\nimport DMList from './components/DMList';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [selectedServer, setSelectedServer] = useState(null);\n  const [selectedChannel, setSelectedChannel] = useState(null);\n  const [selectedDM, setSelectedDM] = useState(null);\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, setUser);\n    return () => unsubscribe();\n  }, []);\n  const handleStartDM = async uid => {\n    // Cherche ou crée une conversation privée entre user.uid et uid\n    if (!user || !uid) return;\n    const members = [user.uid, uid].sort();\n    const convQuery = await import('firebase/firestore').then(({\n      query,\n      collection,\n      where,\n      getDocs,\n      addDoc\n    }) => {\n      return {\n        query,\n        collection,\n        where,\n        getDocs,\n        addDoc\n      };\n    });\n    const {\n      query,\n      collection,\n      where,\n      getDocs,\n      addDoc\n    } = convQuery;\n    const q = query(collection(require('./firebase').db, 'privateConversations'), where('members', '==', members));\n    const snap = await getDocs(q);\n    let convId;\n    if (!snap.empty) {\n      convId = snap.docs[0].id;\n    } else {\n      const docRef = await addDoc(collection(require('./firebase').db, 'privateConversations'), {\n        members\n      });\n      convId = docRef.id;\n    }\n    setSelectedDM(convId);\n    setSelectedServer(null);\n    setSelectedChannel(null);\n  };\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-800 flex flex-col items-center justify-center text-white\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-black bg-opacity-40 rounded-2xl shadow-2xl p-10 flex flex-col items-center w-full max-w-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"64\",\n            height: \"64\",\n            viewBox: \"0 0 64 64\",\n            fill: \"none\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n              cx: \"32\",\n              cy: \"32\",\n              r: \"32\",\n              fill: \"#6366F1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M44 40C44 40 41 37 32 37C23 37 20 40 20 40\",\n              stroke: \"white\",\n              strokeWidth: \"3\",\n              strokeLinecap: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ellipse\", {\n              cx: \"25.5\",\n              cy: \"28.5\",\n              rx: \"3.5\",\n              ry: \"4.5\",\n              fill: \"white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ellipse\", {\n              cx: \"38.5\",\n              cy: \"28.5\",\n              rx: \"3.5\",\n              ry: \"4.5\",\n              fill: \"white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-4xl font-extrabold mb-2 tracking-tight\",\n          children: \"Catcord\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-lg mb-6 text-purple-200 text-center\",\n          children: \"Le chat vocal et textuel nouvelle g\\xE9n\\xE9ration, inspir\\xE9 de Discord.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AuthForm, {\n          user: user,\n          onAuth: () => {}\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n        className: \"mt-10 text-purple-300 text-sm opacity-70\",\n        children: [\"\\xA9 \", new Date().getFullYear(), \" Catcord. Inspir\\xE9 par Discord.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen flex bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-800 text-white overflow-hidden min-w-0 flex-nowrap md:flex-nowrap flex-wrap\",\n    children: [/*#__PURE__*/_jsxDEV(ServerSidebar, {\n      user: user,\n      selectedServer: selectedServer,\n      setSelectedServer: setSelectedServer,\n      setSelectedChannel: setSelectedChannel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ChannelPanel, {\n      serverId: selectedServer,\n      selectedChannel: selectedChannel,\n      setSelectedChannel: setSelectedChannel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MessagePanel, {\n      channelId: selectedChannel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MemberPanel, {\n      serverId: selectedServer,\n      onStartDM: handleStartDM\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"67h7I1BPalJZGQFMy7Tp2eE5mFc=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","auth","onAuthStateChanged","AuthForm","ServerSidebar","ChannelPanel","MessagePanel","MemberPanel","DMList","jsxDEV","_jsxDEV","App","_s","user","setUser","selectedServer","setSelectedServer","selectedChannel","setSelectedChannel","selectedDM","setSelectedDM","unsubscribe","handleStartDM","uid","members","sort","convQuery","then","query","collection","where","getDocs","addDoc","q","require","db","snap","convId","empty","docs","id","docRef","className","children","width","height","viewBox","fill","xmlns","cx","cy","r","fileName","_jsxFileName","lineNumber","columnNumber","d","stroke","strokeWidth","strokeLinecap","rx","ry","onAuth","Date","getFullYear","serverId","channelId","onStartDM","_c","$RefreshReg$"],"sources":["C:/Users/alanp/Documents/GitHub/Catcord/catcord-frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { auth } from './firebase';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport AuthForm from './components/AuthForm';\nimport ServerSidebar from './components/ServerSidebar';\nimport ChannelPanel from './components/ChannelPanel';\nimport MessagePanel from './components/MessagePanel';\nimport MemberPanel from './components/MemberPanel';\nimport DMList from './components/DMList';\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [selectedServer, setSelectedServer] = useState(null);\n  const [selectedChannel, setSelectedChannel] = useState(null);\n  const [selectedDM, setSelectedDM] = useState(null);\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, setUser);\n    return () => unsubscribe();\n  }, []);\n\n  const handleStartDM = async (uid) => {\n    // Cherche ou crée une conversation privée entre user.uid et uid\n    if (!user || !uid) return;\n    const members = [user.uid, uid].sort();\n    const convQuery = await import('firebase/firestore').then(({ query, collection, where, getDocs, addDoc }) => {\n      return { query, collection, where, getDocs, addDoc };\n    });\n    const { query, collection, where, getDocs, addDoc } = convQuery;\n    const q = query(collection(require('./firebase').db, 'privateConversations'), where('members', '==', members));\n    const snap = await getDocs(q);\n    let convId;\n    if (!snap.empty) {\n      convId = snap.docs[0].id;\n    } else {\n      const docRef = await addDoc(collection(require('./firebase').db, 'privateConversations'), { members });\n      convId = docRef.id;\n    }\n    setSelectedDM(convId);\n    setSelectedServer(null);\n    setSelectedChannel(null);\n  };\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-800 flex flex-col items-center justify-center text-white\">\n        <div className=\"bg-black bg-opacity-40 rounded-2xl shadow-2xl p-10 flex flex-col items-center w-full max-w-md\">\n          <div className=\"mb-6\">\n            <svg width=\"64\" height=\"64\" viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <circle cx=\"32\" cy=\"32\" r=\"32\" fill=\"#6366F1\"/>\n              <path d=\"M44 40C44 40 41 37 32 37C23 37 20 40 20 40\" stroke=\"white\" strokeWidth=\"3\" strokeLinecap=\"round\"/>\n              <ellipse cx=\"25.5\" cy=\"28.5\" rx=\"3.5\" ry=\"4.5\" fill=\"white\"/>\n              <ellipse cx=\"38.5\" cy=\"28.5\" rx=\"3.5\" ry=\"4.5\" fill=\"white\"/>\n            </svg>\n          </div>\n          <h1 className=\"text-4xl font-extrabold mb-2 tracking-tight\">Catcord</h1>\n          <p className=\"text-lg mb-6 text-purple-200 text-center\">Le chat vocal et textuel nouvelle génération, inspiré de Discord.</p>\n          <AuthForm user={user} onAuth={() => {}} />\n        </div>\n        <footer className=\"mt-10 text-purple-300 text-sm opacity-70\">&copy; {new Date().getFullYear()} Catcord. Inspiré par Discord.</footer>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-800 text-white overflow-hidden min-w-0 flex-nowrap md:flex-nowrap flex-wrap\">\n      {/* Sidebar serveurs */}\n      <ServerSidebar user={user} selectedServer={selectedServer} setSelectedServer={setSelectedServer} setSelectedChannel={setSelectedChannel} />\n      {/* Panel salons */}\n      <ChannelPanel serverId={selectedServer} selectedChannel={selectedChannel} setSelectedChannel={setSelectedChannel} />\n      {/* Panel messages */}\n      <MessagePanel channelId={selectedChannel} />\n      {/* Panel membres */}\n      <MemberPanel serverId={selectedServer} onStartDM={handleStartDM} />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}